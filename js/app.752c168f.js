(function(){"use strict";var t={525:function(t,e,i){var n=i(9242),s=i(3396),o=i(7139);const a={class:"square"},r={class:"title-header"},c={key:0},l={key:1},u={class:"buttons-switch"};function m(t,e,i,n,m,d){const g=(0,s.up)("ConfigsPage"),h=(0,s.up)("EventsPage");return(0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("h1",r,(0,o.zw)("first"==this.currentPage?"Configs Page":"Events Page"),1),"first"===m.currentPage?((0,s.wg)(),(0,s.iD)("div",c,[(0,s.Wm)(g)])):"second"===m.currentPage?((0,s.wg)(),(0,s.iD)("div",l,[(0,s.Wm)(h,{infos:m.eventsInfo,image:m.eventsImage},null,8,["infos","image"])])):(0,s.kq)("",!0),(0,s._)("div",u,[(0,s._)("button",{class:(0,o.C_)(["config-page-button btn",this.btnConfig]),onClick:e[0]||(e[0]=t=>d.setCurrentPage("first"))},"Configs",2),(0,s._)("button",{class:(0,o.C_)(["btn",this.btnEvent]),onClick:e[1]||(e[1]=t=>d.setCurrentPage("second"))},"Events",2)])])}const d={key:0,class:"container"},g={class:"row"},h=(0,s._)("div",{class:"light-time"},"Active light time window:",-1),f=(0,s._)("span",null,"Start Time:",-1),T=(0,s._)("span",{class:"span-2"},"End Time:",-1),v={class:"row"},p=(0,s._)("div",{class:"light-time"},"Detection time window:",-1),w=(0,s._)("span",null,"Start Time:",-1),b=(0,s._)("span",{class:"span-2"},"End Time:",-1),D={class:"row"},y=(0,s._)("label",{for:"detectTruck"},"Detect Truck",-1),_={class:"row"},P=(0,s._)("label",{for:"detectPerson"},"Detect Person",-1),k={class:"row"},C=(0,s._)("label",{for:"soundAlarm"},"Sound Alarm on Person Detection",-1),L={class:"row"},S=(0,s._)("label",{for:"lightOn"},"Light Status",-1),I={class:"row"},E=(0,s._)("label",{for:"alarmPlaying"},"Alarm Status",-1);function A(t,e,i,a,r,c){return this.configs?((0,s.wg)(),(0,s.iD)("div",d,[(0,s._)("div",null,[(0,s._)("div",g,[h,(0,s._)("div",null,[f,(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>c.selectStartTime&&c.selectStartTime(...t))},(0,o.zw)(r.startTime),1),T,(0,s._)("button",{onClick:e[1]||(e[1]=(...t)=>c.selectEndTime&&c.selectEndTime(...t))},(0,o.zw)(r.endTime),1)])]),(0,s._)("div",v,[p,(0,s._)("div",null,[w,(0,s._)("button",{onClick:e[2]||(e[2]=(...t)=>c.selectStartDetectionTime&&c.selectStartDetectionTime(...t))},(0,o.zw)(r.startTimeDetection),1),b,(0,s._)("button",{onClick:e[3]||(e[3]=(...t)=>c.selectEndDetectionTime&&c.selectEndDetectionTime(...t))},(0,o.zw)(r.endTimeDetection),1)])]),(0,s._)("div",D,[(0,s.wy)((0,s._)("input",{type:"checkbox",id:"detectTruck","onUpdate:modelValue":e[4]||(e[4]=t=>r.detectTruck=t)},null,512),[[n.e8,r.detectTruck]]),y]),(0,s._)("div",_,[(0,s.wy)((0,s._)("input",{type:"checkbox",id:"detectPerson","onUpdate:modelValue":e[5]||(e[5]=t=>r.detectPerson=t)},null,512),[[n.e8,r.detectPerson]]),P]),(0,s._)("div",k,[(0,s.wy)((0,s._)("input",{type:"checkbox",id:"soundAlarm","onUpdate:modelValue":e[6]||(e[6]=t=>r.soundAlarm=t)},null,512),[[n.e8,r.soundAlarm]]),C]),(0,s._)("div",L,[(0,s.wy)((0,s._)("input",{type:"checkbox",id:"lightOn","onUpdate:modelValue":e[7]||(e[7]=t=>r.isLightOn=t)},null,512),[[n.e8,r.isLightOn]]),S]),(0,s._)("div",I,[(0,s.wy)((0,s._)("input",{type:"checkbox",id:"alarmPlaying","onUpdate:modelValue":e[8]||(e[8]=t=>r.isAlarmPlaying=t)},null,512),[[n.e8,r.isAlarmPlaying]]),E])]),(0,s._)("button",{onClick:e[9]||(e[9]=(...t)=>c.saveConfig&&c.saveConfig(...t))},"Save")])):(0,s.kq)("",!0)}var H=i(4161);const O={signalR:"https://tcc-api.azurewebsites.net/ChatHub",Api:"https://tcc-api.azurewebsites.net/api"};var q=O;const R=H.Z.create({baseURL:q.Api,headers:{"Content-Type":"application/json"}});R.interceptors.request.use((t=>t),(t=>Promise.reject(t))),R.interceptors.response.use((t=>t),(t=>Promise.reject(t)));var V=R,z={data(){return{configs:null,ConfigEntity:{Id:0,ConfigLabel:"",Active:!1,StartTime:new Date,EndTime:new Date},detectTruck:!1,detectPerson:!1,soundAlarm:!1,isLightOn:!1,isAlarmPlaying:!1,startTime:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),endTime:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),startTimeDetection:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),endTimeDetection:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}},mounted:async function(){await this.loadData()},methods:{async loadData(){const t=await this.fetchConfigs();this.configs=t,t.forEach((t=>{"LightTime"===t.configLabel?(this.startTime=new Date(t.startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),this.endTime=new Date(t.endTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})):"DetectTruck"===t.configLabel?this.detectTruck=t.active:"DetectPerson"===t.configLabel?this.detectPerson=t.active:"SoundAlarmOnPersonDetection"===t.configLabel?this.soundAlarm=t.active:"DetectionTime"===t.configLabel?(this.startTimeDetection=new Date(t.startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),this.endTimeDetection=new Date(t.endTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})):"IsLightOn"===t.configLabel?this.isLightOn=t.active:"IsAlarmPlaying"===t.configLabel&&(this.isAlarmPlaying=t.active)}))},async saveConfig(){this.configs.forEach((t=>{"LightTime"===t.configLabel?(t.startTime=this.startTime,t.endTime=this.endTime):"DetectTruck"===t.configLabel?t.active=this.detectTruck:"DetectPerson"===t.configLabel?t.active=this.detectPerson:"SoundAlarmOnPersonDetection"===t.configLabel?t.active=this.soundAlarm:"SoundAlarmOnPersonDetection"===t.configLabel?(t.startTime=this.startTimeDetection,t.endTime=this.endTimeDetection):"IsLightOn"===t.configLabel?t.active=this.isLightOn:"IsAlarmPlaying"===t.configLabel&&(t.active=this.isAlarmPlaying)}));const t=this.parseTimeString(this.startTime),e=this.parseTimeString(this.endTime),i=this.parseTimeString(this.startTimeDetection),n=this.parseTimeString(this.endTimeDetection);this.configs[0].startTime=new Date(1900,1,1,t.hours,t.minutes),this.configs[0].endTime=new Date(1900,1,1,e.hours,e.minutes),this.configs[4].startTime=new Date(1900,1,1,i.hours,i.minutes),this.configs[4].endTime=new Date(1900,1,1,n.hours,n.minutes),this.configs.forEach((t=>{t.startTime=t.startTime.toString(),t.endTime=t.endTime.toString()})),await this.updateConfigs()},parseTimeString(t){const[e,i]=t.split(":").map(Number);return{hours:e,minutes:i}},async updateConfigs(){await V.put("/Config/ChangeConfig",this.configs).then((t=>{console.log(t.data)})).catch((t=>{console.error(t)}))},async fetchConfigs(){const t=await V.get("/Config/FetchConfigs").catch((t=>{console.error(t)}));return t.data},selectStartDetectionTime(){const t=window.prompt("Select Start Time (HH:mm)",this.startTimeDetection);if(t){const[e,i]=t.split(":"),n=this.isValidTime(e,i);n?this.startTimeDetection=t:window.alert("Invalid time! Please enter a valid time in the format HH:mm.")}},selectEndDetectionTime(){const t=window.prompt("Select End Time (HH:mm)",this.endTimeDetection);if(t){const[e,i]=t.split(":"),n=this.isValidTime(e,i);n?this.endTimeDetection=t:window.alert("Invalid time! Please enter a valid time in the format HH:mm.")}},selectStartTime(){const t=window.prompt("Select Start Time (HH:mm)",this.startTime);if(t){const[e,i]=t.split(":"),n=this.isValidTime(e,i);n?this.startTime=t:window.alert("Invalid time! Please enter a valid time in the format HH:mm.")}},selectEndTime(){const t=window.prompt("Select End Time (HH:mm)",this.endTime);if(t){const[e,i]=t.split(":"),n=this.isValidTime(e,i);n?this.endTime=t:window.alert("Invalid time! Please enter a valid time in the format HH:mm.")}},isValidTime(t,e){const i=parseInt(t,10),n=parseInt(e,10);return!isNaN(i)&&!isNaN(n)&&i>=0&&i<=23&&n>=0&&n<=59}}},x=i(89);const j=(0,x.Z)(z,[["render",A]]);var U=j;const N={key:0},Z=["src"],F={key:1},G={key:2},B={key:0};function W(t,e,i,n,a,r){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",null,[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>r.requestImage&&r.requestImage(...t))},"Request Image"),(0,s._)("button",{onClick:e[1]||(e[1]=(...t)=>r.requestInfo&&r.requestInfo(...t))},"Request Infos"),this.image?((0,s.wg)(),(0,s.iD)("div",N,[(0,s._)("img",{src:a.image,alt:"Requested Image"},null,8,Z)])):(0,s.kq)("",!0),this.infos?.gps?((0,s.wg)(),(0,s.iD)("div",F,[(0,s._)("p",null,"GPS Coordinates: "+(0,o.zw)(this.infos.gps),1)])):(0,s.kq)("",!0),this.infos?.battery?((0,s.wg)(),(0,s.iD)("div",G,[(0,s._)("p",null,"Battery: "+(0,o.zw)(this.infos.battery),1),(0,s._)("p",null,"Gps: "+(0,o.zw)(this.infos.gps),1)])):(0,s.kq)("",!0)]),a.eventLogHistory?.length?((0,s.wg)(),(0,s.iD)("ul",B,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.eventLogHistory,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.Id},(0,o.zw)("LogType: "+t.LogType+"Status: "+t.Status+"Value: "+t.Value+"Date: "+t.TimeStamp),1)))),128))])):(0,s.kq)("",!0)])}var K={props:{infos:{type:Array,required:!1}},mounted:async function(){await this.loadData()},data(){return{eventLogHistory:null,image:null}},methods:{async loadData(){try{const t=await V.get("/Event/GetHistory");this.eventLogHistory=t}catch(t){console.error(t)}},async requestImage(){try{await V.get("/Event/RequestImage")}catch(t){console.error(t)}},async requestInfo(){try{await V.get("/Event/RequestInfos")}catch(t){console.error(t)}},getBase64(t){var e=new FileReader;e.readAsDataURL(t),e.onload=function(){return e.result},e.onerror=function(t){console.log("Error: ",t)}}}};const M=(0,x.Z)(K,[["render",W]]);var Y=M,J=i(4900);let Q=(new J.s).withUrl(q.signalR).build();var X={name:"App",components:{ConfigsPage:U,EventsPage:Y},data(){return{currentPage:"first",pageTitle:"Configs",btnConfig:"btn-configs",btnEvent:"",eventsInfo:null,eventsImage:null}},mounted:async function(){Q.start(),Q.on("ReceiveImage",(t=>{this.eventsImage=t})),Q.on("ReceiveInfos",(t=>{this.eventsInfo=t}))},methods:{setCurrentPage(t){this.currentPage=t,"first"==t?(this.btnConfig="btn-configs",this.btnEvent=""):(this.btnEvent="btn-events",this.btnConfig="")}}};const $=(0,x.Z)(X,[["render",m]]);var tt=$;(0,n.ri)(tt).mount("#app")}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,i),o.exports}i.m=t,function(){var t=[];i.O=function(e,n,s,o){if(!n){var a=1/0;for(u=0;u<t.length;u++){n=t[u][0],s=t[u][1],o=t[u][2];for(var r=!0,c=0;c<n.length;c++)(!1&o||a>=o)&&Object.keys(i.O).every((function(t){return i.O[t](n[c])}))?n.splice(c--,1):(r=!1,o<a&&(a=o));if(r){t.splice(u--,1);var l=s();void 0!==l&&(e=l)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[n,s,o]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,n){var s,o,a=n[0],r=n[1],c=n[2],l=0;if(a.some((function(e){return 0!==t[e]}))){for(s in r)i.o(r,s)&&(i.m[s]=r[s]);if(c)var u=c(i)}for(e&&e(n);l<a.length;l++)o=a[l],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(u)},n=self["webpackChunktcc_ui"]=self["webpackChunktcc_ui"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(525)}));n=i.O(n)})();
//# sourceMappingURL=app.752c168f.js.map